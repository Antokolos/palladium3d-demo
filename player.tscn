[gd_scene load_steps=23 format=2]

[ext_resource path="res://player.gd" type="Script" id=1]
[ext_resource path="res://vasya.tscn" type="PackedScene" id=2]
[ext_resource path="res://env_opt.tres" type="Environment" id=3]
[ext_resource path="res://culling_rays.gd" type="Script" id=4]
[ext_resource path="res://action_use.gd" type="Script" id=5]
[ext_resource path="res://shader_cache.gd" type="Script" id=6]
[ext_resource path="res://default_theme.tres" type="Theme" id=7]
[ext_resource path="res://StoryNode.cs" type="Script" id=8]
[ext_resource path="res://assets/ui/32-32_white.png" type="Texture" id=9]
[ext_resource path="res://assets/Titillium-Regular.otf" type="DynamicFontData" id=10]
[ext_resource path="res://Gun_label.gd" type="Script" id=11]
[ext_resource path="res://assets/ui/tex_crouch_off.tres" type="StyleBox" id=12]
[ext_resource path="res://tablet.tscn" type="PackedScene" id=13]

[sub_resource type="CapsuleShape" id=1]
margin = 0.06
radius = 0.3
height = 1.6

[sub_resource type="BoxShape" id=2]
extents = Vector3( 0.16, 0.04, 0.16 )

[sub_resource type="BoxShape" id=3]
extents = Vector3( 0.24, 0.36, 0.2 )

[sub_resource type="StyleBoxFlat" id=4]
corner_radius_bottom_right = 90
corner_detail = 10

[sub_resource type="StyleBoxFlat" id=5]
bg_color = Color( 0.158587, 0.106689, 0.179688, 1 )
border_color = Color( 0.277183, 0.201141, 0.304688, 1 )
corner_radius_bottom_right = 80
corner_detail = 10
anti_aliasing = false

[sub_resource type="DynamicFont" id=6]
size = 42
use_filter = true
font_data = ExtResource( 10 )

[sub_resource type="StyleBoxFlat" id=7]
corner_radius_top_left = 90
corner_detail = 10

[sub_resource type="StyleBoxFlat" id=8]
bg_color = Color( 0.156863, 0.105882, 0.176471, 1 )
corner_radius_top_left = 80
corner_detail = 10

[sub_resource type="Animation" id=9]
tracks/0/type = "value"
tracks/0/path = NodePath("Body_CollisionShape:shape:height")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ 1.6, 0.6 ]
}
tracks/1/type = "value"
tracks/1/path = NodePath("Body_CollisionShape:translation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector3( 0, 1.1, 0 ), Vector3( 0, 0.6, 0 ) ]
}
tracks/2/type = "value"
tracks/2/path = NodePath("Rotation_Helper:translation")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector3( 0, 1.52, 0 ), Vector3( 0, 0.52, 0 ) ]
}
tracks/3/type = "value"
tracks/3/path = NodePath("Rotation_Helper/Model:translation")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/keys = {
"times": PoolRealArray( 0, 1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 0,
"values": [ Vector3( 0, -1.52, 0 ), Vector3( 0, -0.52, 0 ) ]
}

[node name="player" type="KinematicBody"]
script = ExtResource( 1 )

[node name="Body_CollisionShape" type="CollisionShape" parent="."]
transform = Transform( 1, 0, 0, 0, -5.68248e-008, -1, 0, 1.3, -4.37114e-008, 0, 1.1, 0 )
shape = SubResource( 1 )

[node name="Feet_CollisionShape" type="CollisionShape" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.04, 0 )
shape = SubResource( 2 )

[node name="Rotation_Helper" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.52, 0 )

[node name="Model" type="Spatial" parent="Rotation_Helper"]
transform = Transform( -4.37114e-008, 0, -1, 0, 1, 0, 1, 0, -4.37114e-008, 0, -1.52, 0 )

[node name="vasya" parent="Rotation_Helper/Model" instance=ExtResource( 2 )]

[node name="Camera" type="Camera" parent="Rotation_Helper"]
transform = Transform( -1, 0, -8.74228e-008, 0, 1, 0, 8.74228e-008, 0, -1, 0, 0.489609, 0.0905328 )
environment = ExtResource( 3 )
current = true
fov = 55.0
near = 0.01
far = 23.0

[node name="culling_rays" type="Spatial" parent="Rotation_Helper/Camera"]
editor/display_folded = true
script = ExtResource( 4 )

[node name="RayCast" type="RayCast" parent="Rotation_Helper/Camera/culling_rays"]
enabled = true
cast_to = Vector3( 0, 0, -23 )
collision_mask = 2

[node name="Gun_Fire_Points" type="Spatial" parent="Rotation_Helper/Camera"]
transform = Transform( -1, 0, 8.74228e-008, 0, 1, 0, -8.74228e-008, 0, -1, 0, 0, -0.05 )

[node name="Rifle_Point" type="Spatial" parent="Rotation_Helper/Camera/Gun_Fire_Points"]

[node name="Ray_Cast" type="RayCast" parent="Rotation_Helper/Camera/Gun_Fire_Points/Rifle_Point"]
enabled = true
cast_to = Vector3( 0, 0, 32 )

[node name="Knife_Point" type="Spatial" parent="Rotation_Helper/Camera/Gun_Fire_Points"]

[node name="InteractArea" type="Area" parent="Rotation_Helper/Camera/Gun_Fire_Points/Knife_Point"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.2, 0 )
input_ray_pickable = false

[node name="Collision_Shape" type="CollisionShape" parent="Rotation_Helper/Camera/Gun_Fire_Points/Knife_Point/InteractArea"]
shape = SubResource( 3 )

[node name="Use_Point" type="Spatial" parent="Rotation_Helper/Camera/Gun_Fire_Points"]
script = ExtResource( 5 )

[node name="Ray_Cast" type="RayCast" parent="Rotation_Helper/Camera/Gun_Fire_Points/Use_Point"]
enabled = true
cast_to = Vector3( 0, 0, 3 )

[node name="viewpoint" type="Position3D" parent="Rotation_Helper/Camera"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -1.77636e-015, 0, -1 )

[node name="shader_cache" type="Spatial" parent="Rotation_Helper/Camera/viewpoint"]
script = ExtResource( 6 )

[node name="Flashlight" type="SpotLight" parent="Rotation_Helper/Camera"]
transform = Transform( -1, 8.74228e-008, 0, -8.74228e-008, -1, 0, 0, 0, 1, 0, 0, 0 )
visible = false
light_color = Color( 1, 0.913725, 0.768627, 1 )
light_energy = 0.8
shadow_bias = 0.3
spot_range = 9.0
spot_attenuation = 1.7411
spot_angle = 42.0
spot_angle_attenuation = 2.07053

[node name="HUD" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
theme = ExtResource( 7 )

[node name="Hints" type="ColorRect" parent="HUD"]
anchor_top = 0.75
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.141176, 0.141176, 0.141176, 0 )

[node name="HBoxContainer" type="HBoxContainer" parent="HUD/Hints"]
anchor_right = 1.0
anchor_bottom = 1.0
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="HintLabel" type="Label" parent="HUD/Hints/HBoxContainer"]
margin_top = 97.0
margin_right = 234.0
margin_bottom = 172.0
text = "F -- фонарик
Tab -- инвентарь"

[node name="ActionHintLabel" type="Label" parent="HUD/Hints/HBoxContainer"]
margin_left = 238.0
margin_top = 117.0
margin_right = 1920.0
margin_bottom = 153.0
size_flags_horizontal = 3
align = 1
valign = 1

[node name="Conversation" type="ColorRect" parent="HUD"]
editor/display_folded = true
visible = false
anchor_top = 0.75
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.140625, 0.140625, 0.140625, 0.901961 )

[node name="HBoxContainer" type="HBoxContainer" parent="HUD/Conversation"]
margin_right = 40.0
margin_bottom = 40.0

[node name="VBoxContainer" type="VBoxContainer" parent="HUD/Conversation/HBoxContainer"]
margin_right = 126.0
margin_bottom = 111.0
alignment = 1

[node name="ConversationText" type="Label" parent="HUD/Conversation/HBoxContainer/VBoxContainer"]
margin_right = 126.0
margin_bottom = 19.0
text = "ConversationText"

[node name="VBoxContainer" type="VBoxContainer" parent="HUD/Conversation/HBoxContainer/VBoxContainer"]
margin_right = 40.0
margin_bottom = 40.0

[node name="Choice1" type="Label" parent="HUD/Conversation/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 46.0
margin_right = 126.0
margin_bottom = 65.0
text = "Choice1"

[node name="Choice2" type="Label" parent="HUD/Conversation/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 69.0
margin_right = 126.0
margin_bottom = 88.0
text = "Choice2"

[node name="Choice3" type="Label" parent="HUD/Conversation/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 92.0
margin_right = 126.0
margin_bottom = 111.0
text = "Choice3"

[node name="Choice4" type="Label" parent="HUD/Conversation/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 92.0
margin_right = 126.0
margin_bottom = 111.0
text = "Choice3"

[node name="Choice5" type="Label" parent="HUD/Conversation/HBoxContainer/VBoxContainer/VBoxContainer"]
margin_top = 92.0
margin_right = 126.0
margin_bottom = 111.0
text = "Choice3"

[node name="StoryNode" type="Node" parent="HUD/Conversation"]
script = ExtResource( 8 )

[node name="Inventory" type="ColorRect" parent="HUD"]
visible = false
anchor_top = 0.75
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.140625, 0.140625, 0.140625, 0.901961 )

[node name="HBoxContainer" type="HBoxContainer" parent="HUD/Inventory"]
margin_right = 40.0
margin_bottom = 40.0
size_flags_horizontal = 3
size_flags_vertical = 3
alignment = 1

[node name="Crosshair" type="Control" parent="HUD"]
editor/display_folded = true
modulate = Color( 1, 1, 1, 0.705882 )
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -21.0
margin_top = -21.0
margin_right = 21.0
margin_bottom = 21.0

[node name="Bottom_IMG" type="TextureRect" parent="HUD/Crosshair"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -2.5
margin_top = 4.5
margin_right = 2.5
margin_bottom = 20.5
texture = ExtResource( 9 )
expand = true

[node name="Top_IMG" type="TextureRect" parent="HUD/Crosshair"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -2.5
margin_top = -20.5
margin_right = 2.5
margin_bottom = -4.5
texture = ExtResource( 9 )
expand = true

[node name="Left_IMG" type="TextureRect" parent="HUD/Crosshair"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -4.5
margin_top = -2.5
margin_right = 0.5
margin_bottom = 12.5
rect_rotation = 90.0
texture = ExtResource( 9 )
expand = true

[node name="Right_IMG" type="TextureRect" parent="HUD/Crosshair"]
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = 19.5
margin_top = -2.5
margin_right = 24.5
margin_bottom = 12.5
rect_rotation = 90.0
texture = ExtResource( 9 )
expand = true

[node name="Stats" type="Panel" parent="HUD"]
modulate = Color( 1, 1, 1, 0.705882 )
margin_right = 190.0
margin_bottom = 90.0
custom_styles/panel = SubResource( 4 )

[node name="Stats_border" type="Panel" parent="HUD/Stats"]
modulate = Color( 0.679688, 0.679688, 0.679688, 1 )
margin_right = 180.0
margin_bottom = 80.0
custom_styles/panel = SubResource( 5 )

[node name="Stats_label" type="Label" parent="HUD/Stats"]
self_modulate = Color( 1, 1, 1, 0.705882 )
margin_left = 10.0
margin_top = 20.0
margin_right = 380.0
margin_bottom = 109.0
custom_fonts/font = SubResource( 6 )
custom_colors/font_color = Color( 1, 1, 1, 1 )
text = "FPS: ???"
script = ExtResource( 11 )

[node name="Indicators" type="Panel" parent="HUD"]
modulate = Color( 1, 1, 1, 0.705882 )
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -190.0
margin_top = -90.0
custom_styles/panel = SubResource( 7 )

[node name="Indicators_border" type="Panel" parent="HUD/Indicators"]
modulate = Color( 0.679688, 0.679688, 0.679688, 1 )
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -180.0
margin_top = -80.0
custom_styles/panel = SubResource( 8 )

[node name="IndicatorCrouch" type="Panel" parent="HUD/Indicators/Indicators_border"]
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -72.0
margin_top = -72.0
margin_right = -8.0
margin_bottom = -8.0
custom_styles/panel = ExtResource( 12 )

[node name="Dimmer" type="ColorRect" parent="HUD"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.140625, 0.140625, 0.140625, 0.901961 )

[node name="tablet" parent="HUD" instance=ExtResource( 13 )]
visible = false

[node name="QuitDialog" type="ConfirmationDialog" parent="."]
pause_mode = 2
margin_right = 200.0
margin_bottom = 70.0
popup_exclusive = true
dialog_text = "Are you sure?"

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
anims/crouch = SubResource( 9 )
[connection signal="confirmed" from="QuitDialog" to="." method="_on_QuitDialog_confirmed"]
[connection signal="popup_hide" from="QuitDialog" to="." method="_on_QuitDialog_popup_hide"]
